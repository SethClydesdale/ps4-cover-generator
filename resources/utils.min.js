function ForAll(e,o){this.iterate(e,o)}function replaceCheckboxes(){for(var e,o,r,n=document.querySelectorAll('input[type="checkbox"]:not([data-old-checkbox])'),t=0,l=n.length;t<l;t++)n[t].dataset.oldCheckbox=!0,o=n[t].nextSibling,r=n[t].parentNode,e=document.createElement("A"),e.href="#",e.className="pseudo-checkbox",e.onclick=function(){return this.previousSibling.click(),!1},o?r.insertBefore(e,o):r.appendChild(e)}ForAll.prototype.index=-1,ForAll.prototype.status="looping",ForAll.prototype.iterate=function(e,o){if(e[++this.index]){var r=this;o(e[this.index]),setTimeout(function(){r.iterate(e,o)},0)}else this.status="done",this.done(this.doneCallback)},ForAll.prototype.done=function(e){e&&("done"==this.status?e():this.doneCallback=e)},window.ColorInpicker={init:function(e){e=e||{};for(var o,r,n=document.querySelectorAll(".color-inpicker"),t=0,l=n.length;t<l;t++)n[t].className=n[t].className.replace(/(?:\s|)color-inpicker/,""),o=document.createElement("A"),o.href="#",o.className="color-inpicker-box",o.style.backgroundColor=n[t].value||"#000000",o.addEventListener("click",function(e){ColorInpicker.call(this),e.preventDefault()}),e.hide?n[t].style.display="none":n[t].addEventListener("input",function(){this.previousSibling.style.backgroundColor=this.value||"#000000"}),n[t].parentNode.insertBefore(o,n[t]);if(o=document.createElement("DIV"),o.id="color-inpicker-box",o.addEventListener("mouseleave",function(){this.parentNode.removeChild(this)}),!ColorInpicker.picker){for(n=["Red","Green","Blue"],t=0,l=n.length,r="";t<l;t++)r+='<div id="color-value-'+n[t].toLowerCase()+'" class="color-inpicker-row"><span class="color-label">'+n[t]+' : </span><span class="color-down" onmousedown="ColorInpicker.color(this, 0);" onmouseup="ColorInpicker.stop();" onmouseout="ColorInpicker.stop();"></span><span class="color-bar"><span class="color-bar-inner"></span></span><span class="color-up" onmousedown="ColorInpicker.color(this, 1);" onmouseup="ColorInpicker.stop();" onmouseout="ColorInpicker.stop();"></span><span class="color-value">0</span></div>';for(var i=["#000000","#333333","#666666","#999999","#CCCCCC","#FFFFFF","#ff0000","#ff4000","#ff8000","#ffbf00","#ffff00","#bfff00","#80ff00","#40ff00","#00ff00","#00ff40","#00ff80","#00ffbf","#00ffff","#00bfff","#0080ff","#0040ff","#0000ff","#4000ff","#8000ff","#bf00ff","#ff00ff","#ff00bf","#ff0080","#ff0040"],t=0,l=i.length,c="";t<l;t++)c+='<a href="#" style="background-color:'+i[t]+'" onclick="ColorInpicker.applyPreset(this.style.backgroundColor); return false"></a>';o.innerHTML='<div id="color-value-result"></div>'+r+'<div id="color-inpicker-presets">'+c+'<a class="fa fa-random" href="#" style="background-color:'+PS_Cover.randomColor()+';" onclick="ColorInpicker.applyPreset(); return false"></a></div>',this.picker=o}},call:function(e){if(document.getElementById("color-inpicker-box"))ColorInpicker.picker.parentNode.removeChild(ColorInpicker.picker),ColorInpicker.last!=e&&ColorInpicker.call(e);else{var o,r,n=e.style.backgroundColor.replace(/rgb\(|\)/g,"").split(","),t=ColorInpicker.picker.querySelectorAll(".color-bar-inner"),l=ColorInpicker.picker.querySelectorAll(".color-value"),i=e.getBoundingClientRect();for(ColorInpicker.last=e,ColorInpicker.input=e.nextSibling,ColorInpicker.picker.style.left=i[/cover-layer/.test(e.parentNode.parentNode.className)?"right":"left"]+"px",o=0,r=t.length;o<r;o++)t[o].style.backgroundColor="rgb("+[n[o]+", 0, 0","0, "+n[o]+", 0","0, 0, "+n[o]][o]+")",t[o].style.width=n[o]/255*100+"%",l[o].innerHTML=n[o];ColorInpicker.picker.querySelector("#color-value-result").style.backgroundColor=e.style.backgroundColor,e.parentNode.insertBefore(ColorInpicker.picker,e)}},applyPreset:function(e){e=(e||PS_Cover.randomColor(!0)).replace(/rgb\(|\)/g,"").split(",");for(var o=ColorInpicker.picker.querySelectorAll(".color-value"),r=0,n=o.length;r<n;r++)o[r].innerHTML=0==r?+e[r]-1:e[r];ColorInpicker.color(document.getElementById("color-value-red").querySelector(".color-up"),1),window.setTimeout(function(){var o=ColorInpicker.last;o.style.backgroundColor=e,ColorInpicker.stop(),ColorInpicker.call(o),ColorInpicker.call(o)},26)},color:function(e,o){var r,n,t=e.parentNode.querySelectorAll(".color-bar-inner, .color-value"),l={red:0,green:1,blue:2}[e.parentNode.id.replace(/color-value-/,"")],i=ColorInpicker.picker.querySelector("#color-value-result"),c=ColorInpicker.picker.querySelectorAll(".color-value"),a=+t[1].innerHTML;ColorInpicker.coloring||(ColorInpicker.coloring=!0,ColorInpicker.int=window.setInterval(function(){o&&a>254||!o&&a<1?ColorInpicker.stop():(t[1].innerHTML=+t[1].innerHTML+(o?1:-1),a=+t[1].innerHTML,r=[+c[0].innerHTML,+c[1].innerHTML,+c[2].innerHTML],n=[r[0].toString(16),r[1].toString(16),r[2].toString(16)],t[0].style.backgroundColor="rgb("+[a+", 0, 0","0, "+a+", 0","0, 0, "+a][l]+")",t[0].style.width=a/255*100+"%",i.style.backgroundColor="rgb("+r[0]+", "+r[1]+", "+r[2]+")",ColorInpicker.picker.nextSibling.style.backgroundColor=i.style.backgroundColor,ColorInpicker.picker.nextSibling.nextSibling.value=("#"+(1==n[0].length?"0"+n[0]:n[0])+(1==n[1].length?"0"+n[1]:n[1])+(1==n[2].length?"0"+n[2]:n[2])).toUpperCase(),ColorInpicker.callback&&ColorInpicker.callback(e))},25))},stop:function(){ColorInpicker.coloring=!1,window.clearInterval(ColorInpicker.int)}},window.Inumber={init:function(){for(var e,o=document.querySelectorAll('input[type="number"]:not([data-inumbered])'),r=0,n=o.length;r<n;r++)e=o[r].getBoundingClientRect(),o[r].dataset.inumbered=!0,o[r].insertAdjacentHTML("afterend",'<span class="Inumber-arrows" style="height:'+Math.abs(e.top-e.bottom)+'px"><span class="Inumber-up" onmousedown="Inumber.update(this.parentNode.previousSibling, +1);" onmouseup="Inumber.stop();" onmouseleave="Inumber.stop();"></span><span class="Inumber-down" onmousedown="Inumber.update(this.parentNode.previousSibling, -1);" onmouseup="Inumber.stop();" onmouseleave="Inumber.stop();"></span></span>')},update:function(e,o){Inumber.counting||(Inumber.counting=!0,Inumber.int=window.setInterval(function(){var r=+e.value+o,n=e.max||1/0,t=e.min||-1/0;r>n||r<t?Inumber.stop():(e.value=r,Inumber.callback&&Inumber.callback(e))},50))},stop:function(){Inumber.counting&&(Inumber.counting=!1,window.clearInterval(Inumber.int))}},window.setInterval(function(){var e=document.querySelector("#color-inpicker-presets .fa-random");e&&(e.style.backgroundColor=PS_Cover.randomColor())},3e3),Element.prototype.parentsUntil=function(e){var o,r,n,t=this.parentNode,l=!1,i="."==e.charAt(0)?"className":"#"==e.charAt(0)?"id":"tagName";for(e="tagName"==i?e.toUpperCase():e.slice(1);t&&!l;){if("className"==i){for(o=t[i].split(" "),r=0,n=o.length;r<n;r++)if(e==o[r]){l=!0;break}}else e==t[i]&&(l=!0);l||(t=t.parentNode)}return t},FontDetect=function(){function e(){if(!r){r=!0;var e=document.body,o=document.body.firstChild,n=document.createElement("div");n.id="fontdetectHelper",t=document.createElement("span"),t.innerText="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n.appendChild(t),e.insertBefore(n,o),n.style.position="absolute",n.style.visibility="hidden",n.style.top="-200px",n.style.left="-100000px",n.style.width="100000px",n.style.height="200px",n.style.fontSize="100px"}}function o(e,o){return e instanceof Element?window.getComputedStyle(e).getPropertyValue(o):window.jQuery?$(e).css(o):""}var r=!1,n=["serif","sans-serif","monospace","cursive","fantasy"],t=null;return{onFontLoaded:function(o,n,t,l){if(o){var i=l&&l.msInterval?l.msInterval:100,c=l&&l.msTimeout?l.msTimeout:2e3;if(n||t){if(r||e(),this.isFontLoaded(o))return void(n&&n(o));var a=this,s=(new Date).getTime(),p=setInterval(function(){if(a.isFontLoaded(o))return clearInterval(p),void n(o);(new Date).getTime()-s>c&&(clearInterval(p),t&&t(o))},i)}}},isFontLoaded:function(o){var l=0,i=0;r||e();for(var c=0;c<n.length;++c){if(t.style.fontFamily='"'+o+'",'+n[c],l=t.offsetWidth,c>0&&l!=i)return!1;i=l}return!0},whichFont:function(e){for(var r=o(e,"font-family"),t=r.split(","),l=t.shift();l;){l=l.replace(/^\s*['"]?\s*([^'"]*)\s*['"]?\s*$/,"$1");for(var i=0;i<n.length;i++)if(l==n[i])return l;if(this.isFontLoaded(l))return l;l=t.shift()}return null}}}();