function ForAll(e,o,r){this.list=e,this.callback=o,r&&r<1&&(this.index=this.list.length),this.iterate(r||1)}function replaceCheckboxes(){for(var e,o,r,n=document.querySelectorAll('input[type="checkbox"]:not([data-old-checkbox])'),l=0,t=n.length;l<t;l++)n[l].dataset.oldCheckbox=!0,o=n[l].nextSibling,r=n[l].parentNode,e=document.createElement("A"),e.href="#",e.className="pseudo-checkbox",e.onclick=function(){return this.previousSibling.click(),!1},o?r.insertBefore(e,o):r.appendChild(e)}ForAll.prototype.index=-1,ForAll.prototype.status="looping",ForAll.prototype.iterate=function(e){if("dead"!=this.status)if(this.list[this.index+=e]){var o=this;this.callback(this.list[this.index]),setTimeout(function(){o.iterate(e)},0)}else this.status="done",this.doneCallback&&this.done(this.doneCallback)},ForAll.prototype.done=function(e){return e&&("done"==this.status?e():this.doneCallback=e),this},ForAll.prototype.kill=function(){this.status="dead"},window.ColorInpicker={init:function(e,o){o=o||{};for(var r,n,l=(e||document).querySelectorAll(".color-inpicker"),t=0,i=l.length;t<i;t++)l[t].className=l[t].className.replace(/(?:\s|)color-inpicker/,""),r=document.createElement("A"),r.href="#",r.className="color-inpicker-box",r.style.backgroundColor=l[t].value||"#000000",r.addEventListener("click",function(e){ColorInpicker.call(this),e.preventDefault()}),o.hide?l[t].style.display="none":l[t].addEventListener("input",function(){this.previousSibling.style.backgroundColor=this.value||"#000000"}),l[t].parentNode.insertBefore(r,l[t]);if(r=document.createElement("DIV"),r.id="color-inpicker-box",r.addEventListener("mouseleave",function(){this.parentNode.removeChild(this)}),!ColorInpicker.picker){for(l=["Red","Green","Blue"],t=0,i=l.length,n="";t<i;t++)n+='<div id="color-value-'+l[t].toLowerCase()+'" class="color-inpicker-row"><span class="color-label">'+l[t]+' : </span><span class="color-down" onmousedown="ColorInpicker.color(this, 0);" onmouseup="ColorInpicker.stop();" onmouseout="ColorInpicker.stop();"></span><span class="color-bar"><span class="color-bar-inner"></span></span><span class="color-up" onmousedown="ColorInpicker.color(this, 1);" onmouseup="ColorInpicker.stop();" onmouseout="ColorInpicker.stop();"></span><span class="color-value">0</span></div>';for(var c=["#000000","#333333","#666666","#999999","#CCCCCC","#FFFFFF","#ff0000","#ff4000","#ff8000","#ffbf00","#ffff00","#bfff00","#80ff00","#40ff00","#00ff00","#00ff40","#00ff80","#00ffbf","#00ffff","#00bfff","#0080ff","#0040ff","#0000ff","#4000ff","#8000ff","#bf00ff","#ff00ff","#ff00bf","#ff0080","#ff0040"],t=0,i=c.length,a="";t<i;t++)a+='<a href="#" style="background-color:'+c[t]+'" onclick="ColorInpicker.applyPreset(this.style.backgroundColor); return false"></a>';r.innerHTML='<div id="color-value-result"></div>'+n+'<div id="color-inpicker-presets">'+a+'<a class="fa fa-random" href="#" style="background-color:'+PS_Cover.randomColor()+';" onclick="ColorInpicker.applyPreset(); return false"></a></div>',this.picker=r}},call:function(e){if(document.getElementById("color-inpicker-box"))ColorInpicker.picker.parentNode.removeChild(ColorInpicker.picker),ColorInpicker.last!=e&&ColorInpicker.call(e);else{var o,r,n=e.style.backgroundColor.replace(/rgb\(|\)/g,"").split(","),l=ColorInpicker.picker.querySelectorAll(".color-bar-inner"),t=ColorInpicker.picker.querySelectorAll(".color-value"),i=e.getBoundingClientRect();for(ColorInpicker.last=e,ColorInpicker.input=e.nextSibling,ColorInpicker.picker.style.marginLeft=i.width+i.left+"px",ColorInpicker.picker.style.marginTop="-"+(i.height+60)+"px",o=0,r=l.length;o<r;o++)l[o].style.backgroundColor="rgb("+[n[o]+", 0, 0","0, "+n[o]+", 0","0, 0, "+n[o]][o]+")",l[o].style.width=n[o]/255*100+"%",t[o].innerHTML=n[o];ColorInpicker.picker.querySelector("#color-value-result").style.backgroundColor=e.style.backgroundColor,e.parentNode.insertBefore(ColorInpicker.picker,e)}},applyPreset:function(e){e=(e||PS_Cover.randomColor(!0)).replace(/rgb\(|\)/g,"").split(",");for(var o=ColorInpicker.picker.querySelectorAll(".color-value"),r=0,n=o.length;r<n;r++)o[r].innerHTML=0==r?+e[r]-1:e[r];ColorInpicker.color(document.getElementById("color-value-red").querySelector(".color-up"),1),window.setTimeout(function(){var o=ColorInpicker.last;o.style.backgroundColor=e,ColorInpicker.stop(),ColorInpicker.call(o),ColorInpicker.call(o)},26)},color:function(e,o){var r,n,l=e.parentNode.querySelectorAll(".color-bar-inner, .color-value"),t={red:0,green:1,blue:2}[e.parentNode.id.replace(/color-value-/,"")],i=ColorInpicker.picker.querySelector("#color-value-result"),c=ColorInpicker.picker.querySelectorAll(".color-value"),a=+l[1].innerHTML;ColorInpicker.coloring||(ColorInpicker.coloring=!0,ColorInpicker.int=window.setInterval(function(){o&&a>254||!o&&a<1?ColorInpicker.stop():(l[1].innerHTML=+l[1].innerHTML+(o?1:-1),a=+l[1].innerHTML,r=[+c[0].innerHTML,+c[1].innerHTML,+c[2].innerHTML],n=[r[0].toString(16),r[1].toString(16),r[2].toString(16)],l[0].style.backgroundColor="rgb("+[a+", 0, 0","0, "+a+", 0","0, 0, "+a][t]+")",l[0].style.width=a/255*100+"%",i.style.backgroundColor="rgb("+r[0]+", "+r[1]+", "+r[2]+")",ColorInpicker.picker.nextSibling.style.backgroundColor=i.style.backgroundColor,ColorInpicker.picker.nextSibling.nextSibling.value=("#"+(1==n[0].length?"0"+n[0]:n[0])+(1==n[1].length?"0"+n[1]:n[1])+(1==n[2].length?"0"+n[2]:n[2])).toUpperCase(),ColorInpicker.callback&&ColorInpicker.callback(e))},25))},stop:function(){ColorInpicker.coloring=!1,window.clearInterval(ColorInpicker.int)}},window.setInterval(function(){var e=document.querySelector("#color-inpicker-presets .fa-random");e&&(e.style.backgroundColor=PS_Cover.randomColor())},3e3),window.Inumber={init:function(){for(var e,o=document.querySelectorAll('input[type="number"]:not([data-inumbered])'),r=0,n=o.length;r<n;r++)e=o[r].getBoundingClientRect(),o[r].dataset.inumbered=!0,o[r].insertAdjacentHTML("afterend",'<span class="Inumber-arrows" style="height:'+Math.abs(e.top-e.bottom)+'px"><span class="Inumber-up" onmousedown="Inumber.update(this.parentNode.previousSibling, +1);" onmouseup="Inumber.stop();" onmouseleave="Inumber.stop();"></span><span class="Inumber-down" onmousedown="Inumber.update(this.parentNode.previousSibling, -1);" onmouseup="Inumber.stop();" onmouseleave="Inumber.stop();"></span></span>')},update:function(e,o){Inumber.counting||(Inumber.counting=!0,Inumber.int=window.setInterval(function(){var r=+e.value+o,n=e.max||1/0,l=e.min||-1/0;r>n||r<l?Inumber.stop():(e.value=r,Inumber.callback&&Inumber.callback(e))},50))},stop:function(){Inumber.counting&&(Inumber.counting=!1,window.clearInterval(Inumber.int))}},Element.prototype.parentsUntil=function(e){var o,r,n,l=this.parentNode,t=!1,i="."==e.charAt(0)?"className":"#"==e.charAt(0)?"id":"tagName";for(e="tagName"==i?e.toUpperCase():e.slice(1);l&&!t;){if("className"==i){for(o=l[i].split(" "),r=0,n=o.length;r<n;r++)if(e==o[r]){t=!0;break}}else e==l[i]&&(t=!0);t||(l=l.parentNode)}return l};